<div class="preferences-container">
  <form [formGroup]="preferencesForm" class="preferences-form">
    
    <!-- Notification Preferences -->
    <mat-expansion-panel class="preference-panel" [expanded]="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>notifications</mat-icon>
          Notification Preferences
        </mat-panel-title>
      </mat-expansion-panel-header>
      
      <div class="panel-content">
                 <div class="checkbox-group">
           <mat-checkbox formControlName="email_notifications">
             Email notifications
           </mat-checkbox>
         </div>
      </div>
    </mat-expansion-panel>

    <!-- Privacy Preferences -->
    <mat-expansion-panel class="preference-panel">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>security</mat-icon>
          Privacy Preferences
        </mat-panel-title>
      </mat-expansion-panel-header>
      
      <div class="panel-content">
        <div class="checkbox-group">
          <mat-checkbox formControlName="public_profile">
            Public profile
          </mat-checkbox>
          
          <mat-checkbox formControlName="show_email">
            Show email address on profile
          </mat-checkbox>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- Language & Region -->
    <mat-expansion-panel class="preference-panel">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>language</mat-icon>
          Language & Region
        </mat-panel-title>
      </mat-expansion-panel-header>
      
      <div class="panel-content">
        <div class="form-row">
          <mat-form-field appearance="fill" class="form-field">
            <mat-label>Language</mat-label>
            <mat-select formControlName="language">
              <mat-option *ngFor="let option of languageOptions" [value]="option.value">
                {{ option.label }}
              </mat-option>
            </mat-select>
          </mat-form-field>
          
          <mat-form-field appearance="fill" class="form-field">
            <mat-label>Timezone</mat-label>
            <mat-select formControlName="timezone">
              <mat-option *ngFor="let option of timezoneOptions" [value]="option.value">
                {{ option.label }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
    </mat-expansion-panel>

    <!-- Action Buttons -->
    <div class="form-actions">
      <div class="action-buttons" *ngIf="!isEditing">
        <button 
          mat-raised-button 
          color="primary" 
          (click)="onEdit()"
          class="edit-btn">
          <mat-icon>edit</mat-icon>
          Edit Preferences
        </button>
      </div>
      
      <div class="action-buttons" *ngIf="isEditing">
        <button 
          mat-button 
          (click)="onCancel()"
          [disabled]="isSaving"
          class="cancel-btn">
          Cancel
        </button>
        
        <button 
          mat-raised-button 
          color="primary" 
          (click)="onSave()"
          [disabled]="preferencesForm.invalid || isSaving"
          class="save-btn">
          <mat-spinner diameter="20" *ngIf="isSaving"></mat-spinner>
          <mat-icon *ngIf="!isSaving">save</mat-icon>
          {{ isSaving ? 'Saving...' : 'Save Preferences' }}
        </button>
      </div>
    </div>
  </form>
</div> 